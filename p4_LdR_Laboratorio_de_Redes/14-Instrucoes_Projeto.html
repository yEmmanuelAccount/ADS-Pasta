<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/00-home.css">
    <title>Tutorial para o Script do Projeto</title>
</head>
<body class="ldr-page">
    <header>
        <a href="./" class="btn-voltar">Voltar</a>
    </header>

    <div class="conteudo">
        <h1>Script do Projeto</h1>

        <h2 id="sumario">Sumário</h2>
            <nav class="sumario">
                <ul>
                    <li>
                        <a href="#informacoes_importantes">Informações Importantes</a>
                        <p>Tópicos importantes para o andamento do documento.</p>
                    </li>
                    <li>
                        <a href="#ip_proxmox">IP do Proxmox</a>
                        <p>Mostra como obter o IP do Proxmox.</p>
                    </li>
                    <li>
                        <a href="#configuracoes">Configurações Necessárias</a>
                        <p>Informa o que é necessário para que o script funcione corretamente.</p>
                    </li>
                    <li>
                        <a href="#script">Script</a>
                        <p>Como rodar o script propriamente dito.</p>
                    </li>
                    <li>
                        <a href="#tirando_arquivos">Tirando Arquivos da VM</a>
                        <p>Solução para tirar os arquivos resultantes do script de dentro da VM para sua máquina.</p>
                    </li>                        
                </ul>
            </nav>

        <h2 id="informacoes_importantes"><a class="t" href="#sumario">Informações Importantes</a></h2>
            <ol>
                <li>VMs Docker (CLIENTE) - Servidor XEN: <a href="https://200.129.71.165/">https://200.129.71.165/</a></li>
                <li>Ubuntu22s (SERVIDOR) - ESXi: <a href="https://200.129.71.165:8006">https://200.129.71.165:8006</a></li>
            </ol>
        <p>Garanta que as duas VMs estão ligadas (XEN e Proxmox).</p>
        <p>Esse script faz as medições e os cálculos posteriores, <code>não é responsável por trocar a quantidade de vRAM usada nas medições</code>. É necessário que você execute o script duas vezes para a realização de todas as medições e que a quantidade de vRAM seja modificada manualmente no Proxmox.</p>

        <h2 id="ip_proxmox"><a class="t" href="#sumario">Obtendo IP do Proxmox</a></h2>

            <p>Faça o login no Proxmox e use ifconfig para obter o IP (ens18).</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Proxmox</tab>
                </tabs>
                <pre><code>
                    <comment># login</comment>
                    <t>Usuário:</t> djr 
                    <t>Senha:</t> 654123

                    <comment># obtendo IP</comment>
                    <t>></t> ifconfig
                </code></pre>
            </div>
 
        <h2 id="configuracoes"><a class="t" href="#sumario">Configurações</a></h2>

            <p>Precisamos verificar se a VM está com conexão com a internet, então tentamos dar ping no Google.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <t>></t> ping google.com
                </code></pre>
            </div>

            <p>Caso o ping com o Google não funcione, use o comando a seguir e teste novamente o ping.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <t>></t> sudo dhcpcd
                </code></pre>
            </div>

        <h2 id="script"><a class="t" href="#sumario">Script</a></h2>

            <p>Verifique a existencia da pasta "medidas". Ela deve estar no "~", então digite <code>ls</code> e caso ela exista, rode <code>UM DOS COMANDOS ABAIXO</code>:</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <comment># pelo terminal</comment>
                    <t>djr@dut:~/</t> rm -rf ./medidas

                    <comment># Gerenciador de Arquivos</comment>
                    <t>/home/djr</t> medidas
                </code></pre>
            </div>
            
            <p>Precisando ou não excluri a pasta "medidas", agora temos que rodar o script:</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <comment># baixando do site</comment>
                    <t>></t> curl -o ./install.sh https://talesgardem.com.br/installnodejs.sh

                    <comment># tornando o arquivo executável</comment>
                    <t>></t> chmod +x ./install.sh

                    <comment># instalando</comment>
                    <t>></t> sudo ./install.sh

                    <comment># espere baixar</comment>

                    <comment># entrando no diretório</comment>
                    <t>></t> cd medidas/build

                    <comment># executando o script</comment>
                    <t>></t> sudo nano constants.js <comment># descrição abaixo</comment>
                </code></pre>
            </div>

            <p>Irá abrir um arquivo para você mudar o <code>IP do servidor Proxmox</code> e a <code>quantidade de vRAM que vai usar na medição</code>. Depois, <strong>Ctrl + O</strong> e Enter para salvar e <strong>Ctrl + X</strong> para sair do arquivo.</p>

            <p>Continue com os comandos a seguir:</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <comment># instalando o nvm14</comment>
                    <t>></t> nvm install 14 
                </code></pre>
            </div>

            <p>Caso seu comando anterior tenha resultado em erro, siga as instruções abaixo. Caso tenha dados certo, pode seguir em frente.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <t>></t> cd medidas/build
                    <t>></t> nvm install 14
                </code></pre>
            </div>

            <p></p>
            <div class="box">
                <tabs>
                    <tab class="selected">Xen</tab>
                </tabs>
                <pre><code>
                    <comment># rodando o script</comment>
                    <t>></t> sudo "$(which node)" ./auto.js
                </code></pre>
            </div>

            <p>Agora, espere até aparecer a mensagem de "Medições Finalizadas >:Dc"</p>
            <p>Considerando que cada medição é feita em cerca de 2 minutos, serão necessárias cerca de <strong>2 horas e 15 minutos</strong> a cada 45 medições somadas a 5 minutos de processamento por parte do R e totalizando <strong>4 horas e 30 minutos</strong> ao total.</p>

        <h2 id="tirando_arquivos"><a class="t" href="#sumario">Tirando os Arquivos da VM</a></h2>

            <p>Depois do script terminar de rodar, entre no Gerenciador de Arquivos e siga o caminho <strong>/home/djr/medidas/build/</strong>. Você deve encontrar 2 pastas, que representam as quantidades de vRAM usadas.</p>

            <p>Selecione as 2 pastas, clique com o botão direito, depois em <strong>"Comprimir"</strong> e, na parte inferior da nova janela, escolha a opção <code>.tar.gz</code>.</p>

            <p>Abra o navegador da VM e entre no endereço <a href="https://talesgardem.com.br/chat.html">https://talesgardem.com.br/chat.html</a>, faça seu login temporário e envie seus arquivos (pasta compactada, de preferência com seu nome, e o arquivo .csv).</p>

        <h2 id="enviando_arquivos"><a class="t" href="#sumario">Baixando Arquivos</a></h2>

            <p>Entrando no navegador da sua máquina, entre no mesmo endereço do <a href="https://talesgardem.com.br/chat.html">Talesgardem</a> e baixe os arquivos que você enviou.</p>
    </div>
</body>
</html>