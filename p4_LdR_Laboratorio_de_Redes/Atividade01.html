<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/00-home.css">
    <title>Passo a passo da Atividade 01</title>
</head>
<body class="ldr-page">
    <header>
        <a href="./" class="btn-voltar">Voltar</a>
    </header>

    <div class="conteudo">
        <h1>Como fazer a Atividade 01</h1>

        <h2>Informações Importantes</h2>
            <ol>
                <li>VMs Docker (CLIENTE) - Servidor XEN: <a href="https://200.129.71.165/">https://200.129.71.165/</a></li>
                <li>Ubuntu22s (SERVIDOR) - ESXi: <a href="https://200.129.71.165:8006">https://200.129.71.165:8006</a></li>
            </ol>

        <h1>Habilitando VPN - Windows</h1>
        
            <p>Acesse o arquivo <a href="https://drive.google.com/file/d/15kwcAGOxUnqnkJNHfup7loFNz_H_26ud/view">Criando Túneis VPN</a> para baixar o que for necessário e conseguir habilitar a VPN do seu grupo.</p>

            <p>Baixe a OpenVPN referente ao seu grupo (exemplo: RedesT1) e extraia o .zip resultante.</p>

            <p>Após a extração e instalação, será possível perceber a presença de 3 instaladores diferentes. Escolha a que apresenta <code>install-2.6.7</code>.</p>
            <p>Com essa versão instalada, procure na barra de tarefas do computador um símbolo de <strong>computador com cadeado</strong> (símbolo da VPN). Clique com botão direito, depois em "Import" e importe o arquivo .ovpn que veio junto com o .zip.</p>

            <p>Depois, clique novamente no símbolo da VPN na barra de tarefas e vá em <strong>"Configurações"</strong>, depois procure no menu superior a opção <strong>"Avançado"</strong>. Copie o caminho apresentado para a "Pasta", no tópico <strong>"Arquivos de Configuração".</strong></p>

            <p>Abra uma nova aba no Explorador de Arquivos e cole o caminho copiado anteriormente. O resultado deve ser duas pastas com nomes quase identicos, mas com a segunda terminando com "-config".</p>

            <p>Como fica o Explorador de Arquivos até esse ponto:</p>
            <div class="box">
                <tabs>
                    <tab>RedesT1</tab>
                    <tab class="selected">config</tab>
                </tabs>
                <pre><code>
                    pfSence-UDP4-1194-RedesTeam1
                    pfSence-UDP4-1194-RedesTeam1-config
                </code></pre>
            </div>

            <p>Na aba <strong>RedesT1</strong>, abra a pasta com o nome <code>pfSence-UDP4-1194-RedesTeam1-config</code> e procure os arquivos a seguir:</p>

            <div class="box">
                <tabs>
                    <tab class="selected">RedesT1</tab>
                    <tab>config</tab>
                </tabs>
                <pre><code>
                    pfSence-UDP4-1194-RedesTeam1.p12 
                    pfSence-UDP4-1194-RedesTeam1-tls.key
                </code></pre>
            </div>

            <p>Copie esses arquivos e cole dentro de cada pasta da aba <strong>"config"</strong>.</p>

            <p>Após isso, será possível ligar a VPN, clicando novamente no ícone da barra de tarefas com o botão direito, colocando o mouse por cima da opção <strong>"pfSence-UDP4-1194-RedesTeam1-config"</strong> e depois em <strong>"Conectar"</strong>. Irá aparecer uma tela de login.</p>

            <p>Login:</p>
            <ul>
                <li>RedesTeam1</li>
                <li>R3d3sT1</li>
            </ul>

        <h2>Configurando VPN - Linux</h2>

            <p>Acesse o arquivo <a href="https://drive.google.com/file/d/15kwcAGOxUnqnkJNHfup7loFNz_H_26ud/view">Criando Túneis VPN</a> para baixar o que for necessário e conseguir habilitar a VPN do seu grupo. Vou seguir as instruções para Windowns.</p>

            <p>Baixe a OpenVPN referente ao seu grupo (exemplo: RedesT1) e extraia o .zip resultante. Extraia também o outro .zip interno.</p>

            <p>Dentro do .zip mais interno, você encotrará 3 arquivos. Entre nesse diretório por meio do terminal e execute o comando a seguir:</p>

            <div class="box">
                <pre><code>
                    <t></t> sudo openvpn --config "pfSense-UDP4-1194-RedesTeam1.ovpn"
                </code></pre>
            </div>

            <p>Senha da VPN (lembrando que o número muda de acordo com o grupo):</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>Usuário:</t> RedesTeam1
                    <t>Senha:</t> R3d3sT1
                </code></pre>
            </div>

        <h1>Montando Rede - Preparando Cenário</h1>

        <h2>Ligando VM do XEN</h2>
            

            <p>Ao entrar, primeiramente é mostrado as VMs que estão em <em>running</em>. Se o filtro for trocado para <strong>None</strong>, serão mostradas todas as VMs as quais esse usuário tem acesso.</p>

            <p>As VMs que apresentarem o símbolo de <strong>círculo vermelho</strong> antes de seus nomes estão <strong>desligadas</strong>. Para ligá-las, basta clicar no círculo vermelho ou no botão de <em>Start</em> localizado do lado esquerdo do nome do sistema operacional da VM.</p>

            <p>Depois que a VM estiver devidamente iniciada, clique em seu nome (exemplo: Docker_clone24) e procure a opção <strong>Console</strong>.</p>

        <h2>XEN_Orchestra</h2>
            <p></p>
            <div class="box">
                <tabs>
                    <tab class="selected">Aba</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <comment># login</comment>
                    <t>dut login: </t> djr
                    <t>Password: </t> 654123
                </code></pre>
            </div>

            <p>Logo após o login, observe o IP da sua VM e anote. Outra forma de obtê-lo posteriormente é usando o comando <code>ifconfig</code>.</p>
            <pre><code>
                IP address for eth0: 192.168.1.61
            </code></pre>

            <p>Em seguida, vamos nos transformar em <strong>SuperUsuário</strong> e iniciar a interface gráfica.</p>
            <pre><code>
                djr@dut:~$ sudo su 
                [sudo] password for djr: 654123
                
                startx
            </code></pre>

        <h2>Login no ESXi</h2>
            <p>Login</p>
            <ul>
                <li>User name: ads24</li>
                <li>Password: @ds654123</li>
            </ul>

            <p>Já logado, clique em <strong>Virtual Machines</strong> no menu esquerdo e pesquise o nome da VM ligada no tópico anterior (exemplo: clone24). É dito que a que deve ser aberta é a <strong>Ubuntu22s-clone24</strong> referente ao semestre de 2022, então a nossa deve ser <strong>Ubuntu26s</strong>, mas não tenho certeza disso.</p>

            <p>Estando dentro da máquina certa, procure o botão <strong>Power on</strong> localizado no menu superior. Clique na imagem que antes era o Pinguim para abrir o terminal.</p>

            <p>Login</p>
            <ul>
                <li>ubuntu22server login: djr</li> <comemnt>unbuntu24s-GRUPO1</comemnt>
                <li>Password: 654123</li>
            </ul>

            <p>Após o login, é possível observar o IP que essa máquina possui:</p>
            <pre><code>
                IPv4 address for ens160: 192.168.1.94
            </code></pre>

            <p>Para ter certeza que é esse mesmo o IP, se transforme em SuperUsuário, siga os comandos a seguir e procure o IP referente a Interface <code>ens160</code>:</p>
            <pre><code>
                ads@ubuntu22server:$ sudo su 
                [sudo] password for ads: 654123

                ip a <comment># equivalente ao ifconfig</comment>
            </code></pre>

            <h3>Caso não existe IP</h3>
                <pre><code>
                    dhclient ens160

                    ip a
                </code></pre>

                <p>Procure o IP referente a Interface <strong>ens160</strong>, em frente a <strong>inet</strong>. Exemplo: 192.168.1.110</p>

        <h2>Docker-clone24</h2>
            <p>Aperte no botão <strong>Iniciar</strong>, o primeiro do lado esquerdo da barra de tarefas, depois em <strong>Acessórios</strong> e por último em <strong>LXTerminal</strong> para abrir o terminal da Docker-clone24.</p>

            <p>Dentro do terminal, aperte <code>Ctrl + Shift + T</code> duas vezes, para abrir mais duas abas. Estando na primeira, clique em <strong>Aba</strong> e depois em <strong>Nome da aba</strong> e a renomei para Cliente. Faça o mesmo processo com as demais e as renomei para Servidor e Docker.</p>

            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code> 
                    ssh djr@192.168.0.124 <comment># IP da máquina da ESXI</comment>

                    yes <comment># para confirmar a conexão</comment>

                    ads@192.168.1.110's password: 654123
                </code></pre>
            </div>

            <p>A função dessa tela é servir como espaço para que os algoritmos de controle de congestionamento sejam trocados.</p>

            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code> 
                    ads@ubuntu22server:~$ sudo su 
                    [sudo] password for ads: 654123 
                </code></pre>
            </div>

            <p>"Lembrando que o algoritmo de controle de congestionamento de TCP de todo mundo que inicializa o Linux é o cubic. Só para mostrar:</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code> 
                    root@ubuntu22server:/home/ads# cat /proc/sys/net/ipv4/tcp_congestion_control
                </code></pre>
            </div>

            <p>O algoritmo de controle de congestionamento só será trocado no Servidor ESXI</p>

            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab>Servidor</tab>
                    <tab class="selected">Docker</tab>
                </tabs>
                <pre><code> 
                    root@dut:/home/djr# ssh ads@127.0.0.1 <comment># lo</comment>
                    djr@djr-quic:$ password: 654123
                </code></pre>
            </div>

            <p>Uma forma de observar que está realmente conectada é ver o <strong>IPv4 address for ens160: 192.168.1.110</strong>.</p>

            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab>Servidor</tab>
                    <tab class="selected">Docker</tab>
                </tabs>
                <pre><code> 
                    djr@djr-quic:$ sudo su
                    [sudo] password for ads: 654123

                    <comment># inicializando container</comment>
                    root@djr-quic:/home/djr# docker start 29
                    root@djr-quic:/home/djr# docker attach 29

                    root@djr-quic:/home/djr# service apache2 start
                </code></pre>
            </div>

            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code> 
                    <t>root@dut:/home/djr#</t> ping 172.17.0.2 <comment># ainda impossível de alcançar</comment>

                    <comment># digite 'Ctrl + C' para parar o processo</comment>
                </code></pre>
            </div>

            <p>Mudando as configurações de Firewall</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@djr:.../djr#</t> nft flush rules
                    <t>root@djr:.../djr#</t> iptables -F 
                    <t>root@djr:.../djr#</t> nfw disable
                    <comment># vai dar uma mensagem de erro, mas é normal, pode ignorar ela e seguir para o próximo passo.</comment>
                    
                </code></pre>
            </div>

            <p>Testando a conexão novamente.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@dut:/home/djr#</t> route add -net 172.17.0.0 netmask 255.255.0.0 gw 192.168.1.110 <comment># IP ao qual está conectado das outras 2 abas</comment>

                    <comment># testando novamente o comando de ping</comment>
                    <t>root@dut:/home/djr#</t> ping 172.17.0.2
                </code></pre>
            </div>

            <p>Nesse ponto, a rede está montada. Agora podemos começar os experimentos.</p>

        <h1>Iniciando Experimentos</h1>
            <h2>Criando diretórios</h2>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code> 
                        <t>root@dut:/home/djr/#</t> mkdir atividade1
                        <t>root@dut:/home/djr/#</t> cd atividade1/
                        <t>root@dut:/home/djr/atividade1#</t> mkdir apache2 nginx
                        <t>root@dut:/home/djr/atividade1#</t> cd apache2/ 
                        <t>root@dut:/home/djr/atividade1/apache2#</t> mkdir cubic bic westwood hybla
                        <t>root@dut:/home/djr/atividade1/apache2#</t> cd ..
                        <t>root@dut:/home/djr/atividade1/#</t> cd nginx/
                        <t>root@dut:/home/djr/atividade1/nginx#</t> mkdir cubic bic westwood hybla

                        <comment># para verificar se os mesmos estão criados nos 2</comment>
                        <t>root@dut:/home/djr/atividade1/nginx#</t> ls
                        <t>root@dut:/home/djr/atividade1/nginx#</t> cd ../apache2/;ls
                    </code></pre>
                </div>

        <h2>Primeira Medição - Apache2_Cubic</h2>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@dut:/home/djr/atividade1/apache2#</t> cd cubic/
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> ab -n 2000 -c 100 -e apache2_cubic.csv https://172.17.0.2/ > apache2_cubic.txt

                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> ls <comment># para verificar a existência dos arquivos .csv e .txt</comment>

                    <comment># abrindo o arquivo</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> cat apache2_cubic.txt
                </code></pre>
            </div>

            <p>Com o arquivo <strong>apache2_cubic.txt</strong> aberto, procure as informações <strong>Requests per second</strong> e <strong>Transfer rate</strong>.</p>

        <h2>Segunda Medição - Nginx_Cubic</h2>

            <p>Parando o Apache2 e ligando o Nginx.</p>

            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab>Servidor</tab>
                    <tab class="selected">Docker</tab>
                </tabs>
                <pre><code>
                    root@64f6e6491fff:/# service apache2 stop; service nginx start
                </code></pre>
            </div>

            <p>Fazendo a medição.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code> 
                    root@dut:/home/djr/atividade1/apache2/cubic# cd ../../nginx/cubic
                    root@dut:/home/djr/atividade1/nginx/cubic# ab -n 2000 -c 100 -e nginx_cubic.csv https://172.17.0.2/ > nginx_cubic.txt
                </code></pre>
            </div>

        <h2>Terceira Medição - Nginx_Bic</h2>

            <p>Indo para o diretório certo.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/nginx/cubic# cd ../bic/
                </code></pre>
            </div>

            <p>Mudando o protocolo para BIC.</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@ubuntu22server:/home/ads# echo bic > /proc/sys/net/ipv4/tcp_congestion_control <comment># resposta esperada "rol"</comment>

                    <comment># verificando se realmente trocou</comment>
                    root@ubuntu22server:/home/ads# cat /proc/sys/net/ipv4/tcp_congestion_control <comment># resposta esperada "bic"</comment>
                </code></pre>
            </div>

            <p>Fazendo a medição. (00:39:32)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/nginx/bic# ab -n 2000 -c 100 -e nginx_bic.csv https://172.17.0.2/ > nginx_bic.txt
                </code></pre>
            </div>

        <h2>Quarta Medição - Apache2_Bic</h2>

            <p>Indo para o diretório certo e preparando o comando. (00:39:49)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <comment># mudança de diretório</comment>
                    root@dut:/home/djr/atividade1/nginx/bic# cd ../../apache2/bic

                    <comment># preparando o comando. NÃO APERTE Enter</comment>
                    root@dut:/home/djr/atividade1/apache2/bic# ab -n 2000 -c 100 -e apache2_bic.csv https://172.17.0.2/ > apache2_bic.txt
                </code></pre>
            </div>
            
            <p>Desligando o Nginx e ligando o Apache2. (00:40:30)</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab>Servidor</tab>
                    <tab class="selected">Docker</tab>
                </tabs>
                <pre><code>
                    root@64f6e6491fff:/# service nginx stop; service apache2 start
                </code></pre>
            </div>

            <p>Executando comando. Aperte Enter no comando antes digitado (00:41:00)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/apache2/bic# ab -n 2000 -c 100 -e apache2_bic.csv https://172.17.0.2/ > apache2_bic.txt
                </code></pre>
            </div>

        <h2>Quinta Medição - Apache2_Westwood (00:41:22)</h2>
            <p>Trocando de diretório.</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/apache2/bic# cd ../westwood
                </code></pre>
            </div>

            <p>Trocando o algoritmo de Controle de Congestionamento da máquina. (00:41:45)</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab class="selected">Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@ubuntu22server:/home/ads# echo westwood > /proc/sys/net/ipv4/tcp_congestion_control

                    <comment># Para conferir a troca de algoritmo</comment>
                    root@ubuntu22server:/home/ads# cat /proc/sys/net/ipv4/tcp_congestion_control <comment># resposta esperada: "westwood"</comment>
                </code></pre>
            </div>

            <p>Realizando a medição. (00:42:26)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/apache2/westwood# ab -n 2000 -c 100 -e apache2_westwood.csv https://172.17.0.2/ > apache2_westwood.txt
                </code></pre>
            </div>

            <p>Trocando servidor Apache2 por Nginx. (00:43:20)</p>
            <div class="box">
                <tabs>
                    <tab>Cliente</tab>
                    <tab>Servidor</tab>
                    <tab class="selected">Docker</tab>
                </tabs>
                <pre><code>
                    root@64f6e6491fff:/# service apache2 stop; service nginx start
                </code></pre>
            </div>
            
        <h2>Sexta Medição - Nginx_Westwood - (00:43:42)</h2>
            <p>Trocando de diretório. (00:43:42)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/apache2/westwood# cd ../../nginx/westwood
                </code></pre>
            </div>

            <p>Realizando medição. (00:44:15)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    root@dut:/home/djr/atividade1/nginx/westwood# ab -n 2000 -c 100 -e nginx_westwood.csv https://172.17.0.2/ > nginx_westwood.txt
                </code></pre>
            </div>

        <h2>Pegando arquivos - (00:45:20)</h2>

            <p>Nesse ponto, todas as medições já foram realizadas e agora nos resta fazer o tratamento dos dados. Temos duas opções: fazer o tratamento logo na VM ou trazer os arquivos para o nosso computador e depois tratá-los.</p>
            <p>Vamos fazer da segunda forma.</p>
            
            <h3>Classroom - (00:45:55)</h3>

                <p>Entre no navegador da VM (terceiro ícone da barra de tarefas, da esquerda para a direita), faça login no Google Classroom e posteriormente na sala de aula correta.</p>
                <p>Dentro da sala de aula de Laboratório de Redes, procure o tópico <strong>"Comparando servidores web variando algoritmos de controle de congestionamento do TCP"</strong>.</p>
                <p>Baixe os arquivos <strong>"collect_stats_new.sh"</strong> e <strong>"trata_csv.sh"</strong> abrindo-os em novas janelas e assim conseguindo acesso a opção de realizar o download.</p>
                <p>Depois disso, pode fechar todas as abas e o navegador.</p>

            <h3>Gerenciador de Arquivos - (00:48:52)</h3>

                <p>Abra o Gerenciador de Arquivos (segundo ícone da barra de tarefas, da esquerda para a direita), vá para <strong>Pasta Pessoal</strong> no menu lateral esquerdo, depois em <strong>Downloads</strong> e você encontrará os arquivos baixados anteriormente.</p>

                <p>Em seguida, vá no menu superior da aba, em <strong>Arquivos</strong>, e abra uma nova aba. Na segunda aba, troque o caminho de arquivos para o que está abaixo. (00:49:21)</p>
                <div class="box">
                    <tabs>
                        <tab>Downloads</tab>
                        <tab class="selected">Downloads</tab>
                    </tabs>
                    <pre><code>
                        /home/djr/atividade1 <comment># resultado esperado: duas pastas - "apache2" e "nginx" - nome da aba "atividade1"</comment>
                    </code></pre>
                </div>

                <p>Agora, você irá copiar os dois arquivos baixados, que estão na primeira pasta "Downloads" e colar dentro de cada pasta "bic", "cubic" e "westwood" (00:50:08)</p>
            
            <h3>Terminal</h3>
                <p>Ao voltar ao terminal, vamos conferir se os arquivos realmente estão nas pastas. Seus nomes vão estar com a cor branca, o que significa que não podem ser executados, por isso também vamos dar permissão para que eles sejam executados. (00:51:18)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <comment># conferindo se os arquivos estão na pasta</comment>
                        root@dut:/home/djr/atividade1/nginx/westwood# ls

                        <comment># saída esperada</comment>
                        <result>collect_stats_new.sh nginx_westwood.csv nginx_westwood.txt trata_csv.sh</result>

                        <comment># dando permissão para serem executáveis</comment>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> chmod +x collect_stats_new.sh trata_csv.sh

                        <comment># confindo se a permissão de execução deu certo</comment>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> ls

                        <comment># resultado esperado (a cor de destaque deve ser verde)</comment>
                        <result><d style="color: cyan">collect_stats_new.sh</d> nginx_westwood.csv nginx_westwood.txt <d style="color: cyan">trata_csv.sh</d></result>
                    </code></pre>
                </div>

                <p>Com os preparativos feitos, vamos executar os arquivos baixados. A ordem de execução é importante: <code>collect_stats_new</code> tem e deve ser executado primeiro. (00:52:38)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> ./collect_stats_new.sh nginx_westwood.txt

                        <comment># verificando se deu certo</comment>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> ls

                        <comment># resultado esperado</comment>
                        <result><d style="color: cyan">collect_stats_new.sh</d> nginx_westwood.csv nginx_westwood.txt <d style="color: cyan">trata_csv.sh</d> <d style="color: yellowgreen">status</d></result>
                    </code></pre>
                </div>

                <p>Agora executamos o segundo arquivo. (00:53:55)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> trata_csv.sh nginx_westwood.csv
                    </code></pre>
                </div>

                <p>Verificando se deu certo. (00:54:10)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> cd stats/ 
                        <t>root@dut:/home/djr/atividade1/nginx/westwood/stats#</t> ls
                    </code></pre>
                </div>

                <p>Os arquivos mostrados representam:</p>
                <ul>
                    <li><code>nginx_westwood.csv_timeseries.txt</code> - série temporal</li>
                    <li><code>req_per_sec_nginx_westwood.txt</code> - requisições por segundo</li>
                    <li><code>transfer_rate_nginx_westwood.txt</code> - taxa de transferência do westwood</li>
                </ul>

            <h3>Planilha</h3>
                
                <p>Em uma planilha, dentro ou fora da VM, coloque os seguintes elementos: (00:54:32)</p>
                <table class="tds-table">
                    <thead>
                        <tr>
                            <th>DMU</th>
                            <th>Req por Sec</th>
                            <th>Taxa Transf</th>
                            <th>Hurst</th>
                            <th>Dimensão Fractal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Apache-Bic</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Nginx-Bic</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Apache-Cubic</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Nginx-Cubic</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Apache-Westwood</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>Nginx-Westwood</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <p>Para preencher a informação de <strong>requisições por Segundo</strong> do <strong>Nginx-Westwood</strong>, devemos:</p>
                <ol>
                    <li>Abrir o Gerenciador de Arquivos no diretório correspondente (/home/djr/atividade1/nginx/westwood)</li>
                    <li>Abrir a pasta <strong>stats</strong></li>
                    <li>Abra, clicando duas vezes ou com o botão direito e em <code>Leafpad</code>, o arquivo correspondente (req_per_sec_nginx_westwood)</li>
                    <li>Copie o valor dentro do arquivo, usando <code>Ctrl + C</code> ou selecionando o texto, clicando em <strong>Editar</strong> e depois em <strong>Copiar</strong></li>
                    <li>Cole o valor na planilha (célula B7, no caso desse exemplo)</li>
                </ol>

                <p>Pegando dados sobre Apache-Westwood (01:01:56)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <comment># trocando de diretório</comment>
                        <t>root@dut:/home/djr/atividade1/nginx/westwood#</t> cd ../../apache2/westwood/

                        <comment># verificando permissões dos arquivos</comment>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> ls

                        <comment># resultado esperado: todos brancos</comment>
                        <result>apache2_westwood.csv apache2_westwood.txt collect_stats_new.sh trata_csv.sh</result>

                        <comment># trocando as permissões dos arquivos</comment>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> chmod +x collect_stats_new.sh trata_csv.sh

                        <comment># verificando novas permissões</comment>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> ls

                        <comment># resultado esperado</comment>
                        <result><d style="color: cyan">collect_stats_new.sh</d> apache2_westwood.csv apache2_westwood.txt <d style="color: cyan">trata_csv.sh</d></result>
                    </code></pre>
                </div>

                <p>Realizando coleta de dados. (01:03:55)</p>
                <div class="box">
                    <tabs>
                        <tab class="selected">Cliente</tab>
                        <tab>Servidor</tab>
                        <tab>Docker</tab>
                    </tabs>
                    <pre><code>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> ./collect_stats_new.sh apache2_westwood.txt

                        <comment># verificando se deu certo (criação do diretório "stats")</comment>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> ls

                        <comment># resultado esperado</comment>
                        <result><d style="color: cyan">collect_stats_new.sh</d> apache2_westwood.csv apache2_westwood.txt <d style="color: cyan">trata_csv.sh</d> <d style="color: yellowgreen">stats</d></result>

                        <comment># dando continuidade</comment>
                        <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> ./trata_csv.sh apache2_westwood.csv
                    </code></pre>
                </div>

                <p>Agora podemos voltar para o Gerenciador de Arquivos, no caminho <code>/home/djr/atividade1/apache2/westwood</code>, no diretório <strong>stats</strong> e copiar as informações necessárias dos arquivos "req_per_sec_apache2_westwood" e "transfer_rate_apache2_westwood". (01:04:20)</p>

                <p>Faça isso para todos os demais casos.</p>

        <h2>RkWard (00:57:04)</h2>
            <p>Para calcularmos a Dimensão Fractal, precisamos do Rkwads</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@dut:/home/djr/atividade1/nginx/westwood/stats#</t> apt install rkward -y 
                </code></pre>
            </div>

            <p>Após a instalação ser concluída, vá no menu <strong>Iniciar</strong>, depois em <strong>Executar</strong>, digite "rkward" e clique em "OK". Selecione a opção "Start with an empty workspace".</p>

            <p>Com o rkward aberto, vá no menu inferior, clique na opção <code>R Console</code> e instale os pacotes necessários. (01:06:52)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">R Console</tab>
                </tabs>
                <pre><code>
                    <t>></t> isntall.packages("pracma"); install.packages("fractaldim") <comment># Enter e selecione a opção "0-Cloud [https]"</comment>

                    <comment># para testar a instalação</comment>
                    <t>></t> install.packages('pracma');
                </code></pre>
            </div>

            <p>Caso a mensagem final foi algo parecido com <code>"package 'pracma' is not avaliable (for R version 3.0.2)", copie esse erro e pesquise no Google.</code></p>

            <p>Depois de conseguir instalar os pacotes, pegue o diretório que deseja analizar e use o comando a seguir. (01:11:52)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">R Console</tab>
                </tabs>
                <pre><code>
                    <t>></t> A=scam('/home/djr/atividade1/apache2/westwood/stats/apache2_westwood.csv_timeseries.txt')

                    <comment># resposta esperada</comment>
                    <result>Read 100 items</result>

                    <t>></t> A 

                    <t>></t> library(pracma); library(fractaldim);

                    <t>></t> hurstexp(A) <comment># selecione o primeiro desses valores usando o método R/S</comment>

                    <t>></t> B=fd.estimate(A, methods="madogram") <comment>"rodogram" será usado no projeto</comment>
                </code></pre>
            </div>

        <h2>Escolhendo a rede com melhor desempenho</h2>

            <p>Após a planilha está devidamente preenchida, teremos que escolher qual das redes teve o melhor desempenho. Para isso, vamos pegar os valores de Cubic para colocar na planilha e ter com o que comparar. Se o teclado parecer que não está funcionando como deveria, recarregue a página da VM.(01:15:09)</p>

            <h3>Processamento do Apache-Cubic e do Nginx-Cubic</h3>
            <p>Dando permissão para os arquivos baixados. (01:15:45)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <comment># verificando se é o Apache que está rodando</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/westwood#</t> service apache2 status

                    <comment># resposta esperada</comment>
                    <result>* apache2 is not running</result>

                    <comment># entrando no diretório Cubic</comment>
                    <t>root@dut:/home/djr/atividade1/nginx/westwood/stats#</t> cd ../../cubic/

                    <t>root@dut:/home/djr/atividade1/nginx/cubic#</t> ls

                    <comment># resposta esperada</comment>
                    <result>collect_stats_new.sh nginx_cubic.csv nginx_cubic.txt trata_csv.sh</result>

                    <comment># mudando as permissões dos arquivos</comment>
                    <t>root@dut:/home/djr/atividade1/nginx/cubic#</t> chmod +x trata_csv.sh collect_stats_new.sh

                    <comment># resultado esperado</comment>
                    <result><d style="color: cyan">collect_stats_new.sh</d> nginx_cubic.csv nginx_cubic.txt <d style="color: cyan">trata_csv.sh</d></result>
                </code></pre>
            </div>

            <p>Processando os dados com os arquivos baixados. (01:18:20)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@dut:/home/djr/atividade1/nginx/cubic#</t> ./collect_stats_new.sh nginx_cubic.txt

                    <t>root@dut:/home/djr/atividade1/nginx/cubic#</t> ./trata_csv.sh nginx_cubic.csv
                </code></pre>
            </div>

            <p>Trocando para o Apache e dando permissão para os arquivos. (01:18:38)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <comment># trocando o diretório</comment>
                    <t>root@dut:/home/djr/atividade1/nginx/cubic#</t> cd ../../apache2/cubic/

                    <comment># dando as permissões para os arquivos</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> chmod +x *.sh

                    <comment># verificando se deu certo</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> ls

                    <comment># resultado esperado</comment>
                    <result>apache2_cubic.csv apache2_cubic.txt <d style="color: cyan">collect_stats_new.sh trata_csv.sh</d></result>
                </code></pre>
            </div>

            <p>Processando os dados. (01:19:03)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> ./collect_stats_new.sh apache2_cubic.txt

                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> ./trata_csv.sh apache2_cubic.csv
                </code></pre>
            </div>

            <h3>Processamento de Apache-Bic e Nginx-Bic</h3>
            <p>(01:19:19)</p>
            <div class="box">
                <tabs>
                    <tab class="selected">Cliente</tab>
                    <tab>Servidor</tab>
                    <tab>Docker</tab>
                </tabs>
                <pre><code>
                    <comment># trocando o diretório</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/cubic#</t> cd ../bic/

                    <comment># dando permissão aos arquivos</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/bic#</t> chmod +x *.sh

                    <comment># processamento</comment>
                    <t>root@dut:/home/djr/atividade1/apache2/bic#</t> ./collect_stats_new.sh apache2_bic.txt

                    <t>root@dut:/home/djr/atividade1/apache2/bic#</t> ./trata_csv.sh apache2_bic.csv

                    <comemnt># trocando diretório</comemnt>
                    <t>root@dut:/home/djr/atividade1/apache2/bic#</t> cd ../../nginx/bic/

                    <comment># dando permissões aos arquivos</comment>
                    <t>root@dut:/home/djr/atividade1/nginx/bic#</t> chmod +x *.sh

                    <comment># processamento</comment>
                    <t>root@dut:/home/djr/atividade1/nginx/bic#</t> ./collect_stats_new.sh nginx_bic.txt

                    <t>root@dut:/home/djr/atividade1/nginx/bic#</t> ./trata_csv.sh nginx_bic.csv
                </code></pre>
            </div>
        
        <h2>Qual a melhor?</h2>
            
            <p>Depois da tabela devidamente preenchida, para descobrir qual a melhor em cada quesito, descubra o maior valor das 3 primeiras colunas ("requisições por Segundo", "Taxa de Transferência" e "Hurst") e o menor valor próximo de 1 da última coluna ("Dimensão Fractal")</p>
    </div>
</body>
</html>